!function(e,t){"function"==typeof define&&define.amd?define(["video.js"],function(i){return e.Vimeo=t(i)}):"object"==typeof module&&module.exports?module.exports=e.Vimeo=t(require("video.js")):e.Vimeo=t(e.videojs)}(this,function(e){"use strict";function t(){var e=".vjs-vimeo .vjs-iframe-blocker { display: none; }.vjs-vimeo.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-vimeo .vjs-poster { background-size: cover; }.vjs-vimeo { height:100%; }.vimeoplayer { width:100%; height:180%; position:absolute; left:0; top:-40%; }",t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),t.appendChild(i)}var i={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3},o=e.getComponent("Tech"),n=e.extend(o,{constructor:function(e,t){o.call(this,e,t),""!=e.poster&&this.setPoster(e.poster),this.setSrc(this.options_.source.src,!0),setTimeout(function(){this.el_.parentNode.className+=" vjs-vimeo"}.bind(this))},dispose:function(){this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-vimeo","")},createEl:function(){this.vimeo={},this.vimeoInfo={},this.baseUrl="https://player.vimeo.com/video/",this.baseApiUrl="http://www.vimeo.com/api/v2/video/",this.videoId=n.parseUrl(this.options_.source.src).videoId,this.iframe=document.createElement("iframe"),this.iframe.setAttribute("id",this.options_.techId),this.iframe.setAttribute("title","Vimeo Video Player"),this.iframe.setAttribute("class","vimeoplayer"),this.iframe.setAttribute("src",this.baseUrl+this.videoId+"?api=1&player_id="+this.options_.techId),this.iframe.setAttribute("frameborder","0"),this.iframe.setAttribute("scrolling","no"),this.iframe.setAttribute("marginWidth","0"),this.iframe.setAttribute("marginHeight","0"),this.iframe.setAttribute("webkitAllowFullScreen","0"),this.iframe.setAttribute("mozallowfullscreen","0"),this.iframe.setAttribute("allowFullScreen","0");var e=document.createElement("div");if(e.setAttribute("style","margin:0 auto;padding-bottom:56.25%;width:100%;height:0;position:relative;overflow:hidden;"),e.setAttribute("class","vimeoFrame"),e.appendChild(this.iframe),!r&&!this.options_.ytControls){var t=document.createElement("div");t.setAttribute("class","vjs-iframe-blocker"),t.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),t.onclick=function(){this.onPause()}.bind(this),e.appendChild(t)}return n.isApiReady?this.initPlayer():n.apiReadyQueue.push(this),""==this.options_.poster&&jQuery.getJSON(this.baseApiUrl+this.videoId+".json?callback=?",{format:"json"},function(e){return function(t){e.setPoster(t[0].thumbnail_large)}}(this)),e},initPlayer:function(){var e=this;n.parseUrl(this.options_.source.src).videoId;this.vimeo&&this.vimeo.api&&(this.vimeo.api("unload"),delete this.vimeo),e.vimeo=$f(e.iframe),e.vimeoInfo={state:i.UNSTARTED,volume:1,muted:!1,muteVolume:1,time:0,duration:0,buffered:0,url:e.baseUrl+e.videoId,error:null},this.vimeo.addEvent("ready",function(t){e.onReady(),e.vimeo.addEvent("loadProgress",function(t,i){e.onLoadProgress(t)}),e.vimeo.addEvent("playProgress",function(t,i){e.onPlayProgress(t)}),e.vimeo.addEvent("play",function(t){e.onPlay()}),e.vimeo.addEvent("pause",function(t){e.onPause()}),e.vimeo.addEvent("finish",function(t){e.onFinish()}),e.vimeo.addEvent("seek",function(t,i){e.onSeek(t)})})},onReady:function(){this.isReady_=!0,this.triggerReady(),this.trigger("loadedmetadata"),this.startMuted&&(this.setMuted(!0),this.startMuted=!1)},onLoadProgress:function(e){var t=!this.vimeoInfo.duration;this.vimeoInfo.duration=e.duration,this.vimeoInfo.buffered=e.percent,this.trigger("progress"),t&&this.trigger("durationchange")},onPlayProgress:function(e){this.vimeoInfo.time=e.seconds,this.trigger("timeupdate")},onPlay:function(){this.vimeoInfo.state=i.PLAYING,this.trigger("play")},onPause:function(){this.vimeoInfo.state=i.PAUSED,this.trigger("pause")},onFinish:function(){this.vimeoInfo.state=i.ENDED,this.trigger("ended")},onSeek:function(e){this.trigger("seeking"),this.vimeoInfo.time=e.seconds,this.trigger("timeupdate"),this.trigger("seeked")},onError:function(e){this.error=e,this.trigger("error")},error:function(){switch(this.errorNumber){case 2:return{code:"Unable to find the video"};case 5:return{code:"Error while trying to play the video"};case 100:return{code:"Unable to find the video"};case 101:case 150:return{code:"Playback on other Websites has been disabled by the video owner."}}return{code:"Vimeo unknown error ("+this.errorNumber+")"}},src:function(){return this.source},poster:function(){return this.poster_},setPoster:function(e){this.poster_=e},setSrc:function(e){e&&e.src&&(this.source=e,this.url=n.parseUrl(e.src),this.options_.poster||this.url.videoId&&(jQuery.getJSON(this.baseApiUrl+this.videoId+".json?callback=?",{format:"json"},function(e){return function(t){e.poster_=t[0].thumbnail_small}}(this)),this.checkHighResPoster()),this.options_.autoplay&&!r&&(this.isReady_?this.play():this.playOnReady=!0))},supportsFullScreen:function(){return!0},load:function(){},play:function(){this.vimeo.api("play")},pause:function(){this.vimeo.api("pause")},paused:function(){return this.vimeoInfo.state!==i.PLAYING&&this.vimeoInfo.state!==i.BUFFERING},currentTime:function(){return this.vimeoInfo.time||0},setCurrentTime:function(e){this.vimeo.api("seekTo",e),this.player_.trigger("timeupdate")},duration:function(){return this.vimeoInfo.duration||0},buffered:function(){return e.createTimeRange(0,this.vimeoInfo.buffered*this.vimeoInfo.duration||0)},volume:function(){return this.vimeoInfo.muted?this.vimeoInfo.muteVolume:this.vimeoInfo.volume},setVolume:function(e){this.vimeo.api("setvolume",e),this.vimeoInfo.volume=e,this.player_.trigger("volumechange")},currentSrc:function(){return this.el_.src},muted:function(){return this.vimeoInfo.muted||!1},setMuted:function(e){e?(this.vimeoInfo.muteVolume=this.vimeoInfo.volume,this.setVolume(0)):this.setVolume(this.vimeoInfo.muteVolume),this.vimeoInfo.muted=e,this.player_.trigger("volumechange")},checkHighResPoster:function(){var e="";try{jQuery.getJSON(this.baseApiUrl+this.videoId+".json?callback=?",{format:"json"},function(e){return function(t){e=t[0].thumbnail_large}}(e));var t=new Image;t.onload=function(){if("naturalHeight"in this){if(this.naturalHeight<=90||this.naturalWidth<=120)return void this.onerror()}else if(this.height<=90||this.width<=120)return void this.onerror();this.poster_=e,this.trigger("posterchange")}.bind(this),t.onerror=function(){},t.src=e}catch(i){}}});n.isSupported=function(){return!0},n.canPlaySource=function(e){return"video/vimeo"===e.type};var r=/(iPad|iPhone|iPod|Android)/g.test(navigator.userAgent);n.parseUrl=function(e){var t={videoId:null},i=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/,o=e.match(i);return o&&(t.videoId=o[5]),t},n.apiReadyQueue=[];var s=function(){n.isApiReady=!0,t();for(var e=0;e<n.apiReadyQueue.length;++e)n.apiReadyQueue[e].initPlayer()};s(),e.registerTech("Vimeo",n);(function(){function e(t){return new e.fn.init(t)}function t(e,t,i){if(!i.contentWindow.postMessage)return!1;var o=JSON.stringify({method:e,value:t});i.contentWindow.postMessage(o,h)}function i(e){var t,i;try{t=JSON.parse(e.data),i=t.event||t.method}catch(o){}if("ready"!=i||u||(u=!0),!/^https?:\/\/player.vimeo.com/.test(e.origin))return!1;"*"===h&&(h=e.origin);var r=t.value,s=t.data,a=""===a?null:t.player_id,d=n(i,a),l=[];return d?(void 0!==r&&l.push(r),s&&l.push(s),a&&l.push(a),l.length>0?d.apply(null,l):d.call()):!1}function o(e,t,i){i?(a[i]||(a[i]={}),a[i][e]=t):a[e]=t}function n(e,t){return t&&a[t]?a[t][e]:a[e]?a[e]:void 0}function r(e,t){if(t&&a[t]){if(!a[t][e])return!1;a[t][e]=null}else{if(!a[e])return!1;a[e]=null}return!0}function s(e){return!!(e&&e.constructor&&e.call&&e.apply)}var a={},u=!1,h=(Array.prototype.slice,"*");return e.fn=e.prototype={element:null,init:function(e){return"string"==typeof e&&(e=document.getElementById(e)),this.element=e,this},api:function(e,i){if(!this.element||!e)return!1;var n=this,r=n.element,a=""!==r.id?r.id:null,u=s(i)?null:i,h=s(i)?i:null;return h&&o(e,h,a),t(e,u,r),n},addEvent:function(e,i){if(!this.element)return!1;var n=this,r=n.element,s=""!==r.id?r.id:null;return o(e,i,s),"ready"!=e?t("addEventListener",e,r):"ready"==e&&u&&i.call(null,s),n},removeEvent:function(e){if(!this.element)return!1;var i=this,o=i.element,n=""!==o.id?o.id:null,s=r(e,n);"ready"!=e&&s&&t("removeEventListener",e,o)}},e.fn.init.prototype=e.fn,window.addEventListener?window.addEventListener("message",i,!1):window.attachEvent("onmessage",i),window.Froogaloop=window.$f=e})()});