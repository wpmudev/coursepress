/*! CoursePress - v2.2.0
 * https://premium.wpmudev.org/project/coursepress-pro/
 * Copyright (c) 2018; * Licensed GPLv2+ */
var CoursePress=CoursePress||{};!function(a){CoursePress.Events=CoursePress.Events||_.extend({},Backbone.Events),CoursePress.editor=CoursePress.editor||{},void 0!==window.getUserSetting&&(CoursePress.editor.init_mode=window.getUserSetting("editor")),CoursePress.editor.create=function(b,c,d,e,f,g){if(void 0===g&&(g=400),void 0===tinyMCEPreInit)return!1;if(f=void 0===f,c=c.replace(/\#/g,""),!_coursepress._dummy_editor){var h=a("#cp-wp-editor");h.length>0&&(_coursepress._dummy_editor=h.html())}var i=_coursepress._dummy_editor;i.match(/id="dummy_editor_id">(.*|\s)/)[1];i=i.replace(/dummy_editor_id/g,c),i=i.replace(/dummy_editor_name/g,d),i=i.replace(/rows="\d*"/g,'style="height: '+g+'px"'),i=i.replace(/<p>\s/g,""),f?a(b).append(i):a(b).replaceWith(i),e=_.unescape(e),a("textarea#"+c).val(e);var j=JSON.parse(JSON.stringify(tinyMCEPreInit.mceInit.dummy_editor_id));return void 0!==j&&(j.body_class=j.body_class.replace(/dummy_editor_id/g,c),j.selector=j.selector.replace(/dummy_editor_id/g,c),j.init_instance_callback="CoursePress.editor.on_init",j.cache_suffix="",j.setup=function(a){a.on("keyup",function(){CoursePress.Events.trigger("editor:keyup",a)}),a.on("NodeChange",function(){CoursePress.Events.trigger("editor:keyup",a)})},a("textarea#"+c).on("keyup",function(){CoursePress.Events.trigger("editor:keyup",this)}),tinyMCE.init(j),tinyMCEPreInit.mceInit[c]=j),j=JSON.parse(JSON.stringify(tinyMCEPreInit.qtInit.dummy_editor_id)),void 0!==j&&(j.id=c,j=window.quicktags(j),tinyMCEPreInit.qtInit[c]=j),window.QTags._buttonsInit(),!0},CoursePress.editor.content=function(b,c){var d="get";return void 0!==c&&(d="set"),void 0===tinyMCE||"html"===window.getUserSetting("editor")?(b="html"===window.getUserSetting("editor")?"#"+b:b,"set"===d&&a(b).val(c.trim()),a(b).val()):("set"===d&&tinyMCE.get(b).setContent(c.trim()),tinyMCE.get(b).getContent())},CoursePress.editor.set_height=function(b,c){a("#wp-"+b+"-editor-container").removeAttr("rows"),a("#wp-"+b+"-wrap iframe").css("height",c+"px")},CoursePress.editor.on_init=function(b){var c=CoursePress.editor.init_mode,d="#"+b.id+"-html",e="#"+b.id+"-tmce",f="#wp-"+b.id+"-editor-tools .wp-editor-tabs";a(d).detach(),a(e).detach();var g='<button id="'+b.id+'-visual" class="wp-switch-editor switch-tmce" type="button">'+_coursepress.editor_visual+"</button>",h='<button id="'+b.id+'-text" class="wp-switch-editor switch-html" type="button">'+_coursepress.editor_text+"</button>";a(f).append('<button class="hidden"></button>'),a(f+' [class="hidden"]').on("click",function(a){a.preventDefault(),a.stopPropagation()}),a(f).append(g),a(f+" #"+b.id+"-visual").on("click",function(a){a.preventDefault(),a.stopPropagation(),window.switchEditors.go(b.id,"tmce")}),a(f).append(h),a(f+" #"+b.id+"-text").on("click",function(a){a.preventDefault(),a.stopPropagation(),window.switchEditors.go(b.id,"html")}),"html"===c&&a(f+" #"+b.id+"-text").click()},CoursePress.utility=CoursePress.utility||{},CoursePress.utility.merge_distinct=function(b,c){var d=b;return a.each(c,function(b,c){a.isArray(c)&&a.isArray(d[b])?d[b]=CoursePress.utility.merge_distinct(d[b],c):d[b]=c}),d},CoursePress.utility.update_object_by_path=function(a,b,c){for(var d=b.split("/");d.length>1;){var e=d.shift();a[e]?a=a[e]:(a[e]={},a=a[e])}a[d.shift()]=c},CoursePress.utility.get_object_path=function(a,b,c,d){void 0===d&&(d="");for(var e=Object.keys(a);e.length>0;){var f=e.shift();if(_.isObject(a[f]))return d=0!==d.length?d+"/"+f:f,CoursePress.utility.get_object_path(a[f],b,c,d);if(f===b&&a[f]===c)return d+"/"+f}},CoursePress.utility.in_array=function(a,b){return b.indexOf(a)>-1},CoursePress.utility.is_valid_url=function(a){return a.indexOf("http://")>-1||a.indexOf("https://")>-1},CoursePress.utility.valid_media_extension=function(b,c){if(c=a(c).hasClass("image_url")?"image_url":c,c=a(c).hasClass("audio_url")?"audio_url":c,c=a(c).hasClass("video_url")?"video_url":c,"any_url"===(c=a(c).hasClass("any_url")?"any_url":c))return!0;var d=b.split(".").pop(),e=_coursepress.allowed_audio_extensions,f=_coursepress.allowed_video_extensions,g=_coursepress.allowed_image_extensions;return"featured_url"===c&&(c="image_url"),"course_video_url"===c&&(c="video_url"),"audio_url"===c?!!CoursePress.utility.in_array(d,e)||(!!(CoursePress.utility.is_valid_url(b)&&d.length>5)||!b.length):"video_url"===c?!!CoursePress.utility.in_array(d,f)||(!!(CoursePress.utility.is_valid_url(b)&&d.length>5)||!b.length):"image_url"===c?!!CoursePress.utility.in_array(d,g)||(!!(CoursePress.utility.is_valid_url(b)&&d.length>5)||!b.length):_coursepress.allowed_extensions?!!CoursePress.utility.in_array(d,_coursepress.allowed_extensions)||(!!(CoursePress.utility.is_valid_url(b)&&d.length>5)||!b.length):void 0},CoursePress.utility.pad=function(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c},CoursePress.utility.unserialize=function(a){function b(a,b,c,d){throw new f.window[a](b,c,d)}function c(a,c,d){for(var e=2,f=[],g=a.slice(c,c+1);g!==d;)e+c>a.length&&b("Error","Invalid"),f.push(g),g=a.slice(c+(e-1),c+e),e+=1;return[f.length,f.join("")]}function d(a,b,c){var d,e,f;for(f=[],d=0;d<c;d++)e=a.slice(b+(d-1),b+d),f.push(e),c-=g(e);return[f.length,f.join("")]}function e(a,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=0,z=function(a){return a};switch(f||(f=0),g=a.slice(f,f+1).toLowerCase(),h=f+2,g){case"i":z=function(a){return parseInt(a,10)},o=c(a,h,";"),y=o[0],n=o[1],h+=y+1;break;case"b":z=function(a){return 0!==parseInt(a,10)},o=c(a,h,";"),y=o[0],n=o[1],h+=y+1;break;case"d":z=function(a){return parseFloat(a)},o=c(a,h,";"),y=o[0],n=o[1],h+=y+1;break;case"n":n=null;break;case"s":p=c(a,h,":"),y=p[0],q=p[1],h+=y+2,o=d(a,h+1,parseInt(q,10)),y=o[0],n=o[1],h+=y+2,y!==parseInt(q,10)&&y!==n.length&&b("SyntaxError","String length mismatch");break;case"a":for(n={},i=c(a,h,":"),y=i[0],j=i[1],h+=y+2,l=parseInt(j,10),k=!0,r=0;r<l;r++)t=e(a,h),u=t[1],s=t[2],h+=u,v=e(a,h),w=v[1],x=v[2],h+=w,s!==r&&(k=!1),n[s]=x;if(k){for(m=new Array(l),r=0;r<l;r++)m[r]=n[r];n=m}h+=1;break;default:b("SyntaxError","Unknown / Unhandled data type(s): "+g)}return[g,h-f,z(n)]}var f=this,g=function(a){var b=a.charCodeAt(0);return b<128?0:b<2048?1:2};return e(a+"",0)[2]},CoursePress.utility.hashcode=function(a){var b,c,d,e=0;if(!a.length)return e;for(b=0,d=a.length;b<d;b++)c=a.charCodeAt(b),e=(e<<5)-e+c,e|=0;return e},CoursePress.utility.md5=function(a){function b(a,b){return a<<b|a>>>32-b}function c(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f}function d(a,b,c){return a&b|~a&c}function e(a,b,c){return a&c|b&~c}function f(a,b,c){return a^b^c}function g(a,b,c){return b^(a|~c)}function h(a,e,f,g,h,i,j){return a=c(a,c(c(d(e,f,g),h),j)),c(b(a,i),e)}function i(a,d,f,g,h,i,j){return a=c(a,c(c(e(d,f,g),h),j)),c(b(a,i),d)}function j(a,d,e,g,h,i,j){return a=c(a,c(c(f(d,e,g),h),j)),c(b(a,i),d)}function k(a,d,e,f,h,i,j){return a=c(a,c(c(g(d,e,f),h),j)),c(b(a,i),d)}function l(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=new Array(f-1),h=0,i=0;i<c;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g}function m(a){var b,c,d="",e="";for(c=0;c<=3;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d}function n(a){a=a.replace(/rn/g,"n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b}var o,p,q,r,s,t,u,v,w,x=[],y=7,z=12,A=17,B=22,C=5,D=9,E=14,F=20,G=4,H=11,I=16,J=23,K=6,L=10,M=15,N=21;for(a=n(a),x=l(a),t=1732584193,u=4023233417,v=2562383102,w=271733878,o=0;o<x.length;o+=16)p=t,q=u,r=v,s=w,t=h(t,u,v,w,x[o+0],y,3614090360),w=h(w,t,u,v,x[o+1],z,3905402710),v=h(v,w,t,u,x[o+2],A,606105819),u=h(u,v,w,t,x[o+3],B,3250441966),t=h(t,u,v,w,x[o+4],y,4118548399),w=h(w,t,u,v,x[o+5],z,1200080426),v=h(v,w,t,u,x[o+6],A,2821735955),u=h(u,v,w,t,x[o+7],B,4249261313),t=h(t,u,v,w,x[o+8],y,1770035416),w=h(w,t,u,v,x[o+9],z,2336552879),v=h(v,w,t,u,x[o+10],A,4294925233),u=h(u,v,w,t,x[o+11],B,2304563134),t=h(t,u,v,w,x[o+12],y,1804603682),w=h(w,t,u,v,x[o+13],z,4254626195),v=h(v,w,t,u,x[o+14],A,2792965006),u=h(u,v,w,t,x[o+15],B,1236535329),t=i(t,u,v,w,x[o+1],C,4129170786),w=i(w,t,u,v,x[o+6],D,3225465664),v=i(v,w,t,u,x[o+11],E,643717713),u=i(u,v,w,t,x[o+0],F,3921069994),t=i(t,u,v,w,x[o+5],C,3593408605),w=i(w,t,u,v,x[o+10],D,38016083),v=i(v,w,t,u,x[o+15],E,3634488961),u=i(u,v,w,t,x[o+4],F,3889429448),t=i(t,u,v,w,x[o+9],C,568446438),w=i(w,t,u,v,x[o+14],D,3275163606),v=i(v,w,t,u,x[o+3],E,4107603335),u=i(u,v,w,t,x[o+8],F,1163531501),t=i(t,u,v,w,x[o+13],C,2850285829),w=i(w,t,u,v,x[o+2],D,4243563512),v=i(v,w,t,u,x[o+7],E,1735328473),u=i(u,v,w,t,x[o+12],F,2368359562),t=j(t,u,v,w,x[o+5],G,4294588738),w=j(w,t,u,v,x[o+8],H,2272392833),v=j(v,w,t,u,x[o+11],I,1839030562),u=j(u,v,w,t,x[o+14],J,4259657740),t=j(t,u,v,w,x[o+1],G,2763975236),w=j(w,t,u,v,x[o+4],H,1272893353),v=j(v,w,t,u,x[o+7],I,4139469664),u=j(u,v,w,t,x[o+10],J,3200236656),t=j(t,u,v,w,x[o+13],G,681279174),w=j(w,t,u,v,x[o+0],H,3936430074),v=j(v,w,t,u,x[o+3],I,3572445317),u=j(u,v,w,t,x[o+6],J,76029189),t=j(t,u,v,w,x[o+9],G,3654602809),w=j(w,t,u,v,x[o+12],H,3873151461),v=j(v,w,t,u,x[o+15],I,530742520),u=j(u,v,w,t,x[o+2],J,3299628645),t=k(t,u,v,w,x[o+0],K,4096336452),w=k(w,t,u,v,x[o+7],L,1126891415),v=k(v,w,t,u,x[o+14],M,2878612391),u=k(u,v,w,t,x[o+5],N,4237533241),t=k(t,u,v,w,x[o+12],K,1700485571),w=k(w,t,u,v,x[o+3],L,2399980690),v=k(v,w,t,u,x[o+10],M,4293915773),u=k(u,v,w,t,x[o+1],N,2240044497),t=k(t,u,v,w,x[o+8],K,1873313359),w=k(w,t,u,v,x[o+15],L,4264355552),v=k(v,w,t,u,x[o+6],M,2734768916),u=k(u,v,w,t,x[o+13],N,1309151649),t=k(t,u,v,w,x[o+4],K,4149444226),w=k(w,t,u,v,x[o+11],L,3174756917),v=k(v,w,t,u,x[o+2],M,718787259),u=k(u,v,w,t,x[o+9],N,3951481745),t=c(t,p),u=c(u,q),v=c(v,r),w=c(w,s);return(m(t)+m(u)+m(v)+m(w)).toLowerCase()},CoursePress.utility.get_gravatar=function(a,b,c,d,e){return a=void 0!==a?a:"john.doe@example.com",b=b>=1&&b<=2048?b:80,c=void 0!==c?c:"mm",d=void 0!==d?d:"x",e=!0===e?"y":"n","https://secure.gravatar.com/avatar/"+CoursePress.utility.md5(a.toLowerCase().trim())+"?size="+b+"&default="+encodeURIComponent(c)+"&rating="+d+("y"===e?"&forcedefault="+e:"")},CoursePress.utility.get_gravatar_image=function(a,b,c,d,e,f){var g=CoursePress.utility.get_gravatar(a,b,d,e,f);return c=void 0!==c?c:"",'<img class="avatar avatar-'+b+' photo" width="'+b+'" height="'+b+'" srcset="'+g+' 2x" src="'+g+'" alt="'+c+'">'},CoursePress.utility.fix_checkboxes=function(b,c,d){var e=a(c+' [name^="meta_"]');return void 0===d&&(d=!1),a.each(e,function(c,e){var f=a(e).attr("name");"checkbox"===e.type&&void 0===_.findWhere(b,{name:f})&&b.push({name:f,value:d})}),b},CoursePress.utility.is_equal=function(a,b,c){return void 0===c?a==b:a===b},CoursePress.utility.checked=function(a,b){return CoursePress.utility.is_equal(a,b)?'checked="checked"':""},CoursePress.utility.event_supported=function(){function a(a){var c=document.createElement(b[a]||"div");a="on"+a;var d=a in c;return d||(c.setAttribute(a,"return;"),d="function"==typeof c[a]),c=null,d}var b={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img",click:"textarea"};return a},CoursePress.utility.attachment_by_url=function(a,b,c,d){(new CoursePress.Models.utility.Attachment).get_attachment(a,b,c,d)},CoursePress.utility.hex_to_rgb=function(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:null},CoursePress.UI=CoursePress.UI||{},CoursePress.UI.toggle_switch=function(b,c,d){void 0===d&&(d=[]);var e="",f=d.class||"",g=d.label||"",h=d.label_class||"",i=d.left||"",j=d.left_class||"",k=d.right||"",l=d.right_class||"",m=d.state||"off",n="";return d.data&&_.isArray(d.data)&&a.each(d.data,function(a,b){n+=_.isString(b)?" data-"+a+'="'+b+'"':""}),e+='<div id="'+b+'" class="toggle-switch coursepress-ui-toggle-switch '+f+" "+m+'" name="'+c+'" '+n+">",g.length>0&&(e+='<span class="label '+h+'">'+g+"</span>"),i.length>0&&(e+='<span class="left '+j+'">'+i+"</span>"),e+='<div class="control"><div class="toggle"></div></div>',k.length>0&&(e+='<span class="right '+l+'">'+k+"</span>"),e+="</div>"},CoursePress.UI.browse_media_field=function(a,b,c){void 0===b&&(b=a),void 0===c&&(c={}),c.title=c.title?c.title:"",c.container_class=c.container_class?c.container_class:"wide",c.textbox_class=c.textbox_class?c.textbox_class:"medium",c.value=c.value?c.value:"",c.placeholder=c.placeholder?c.placeholder:"",c.button_text=c.button_text?c.button_text:"",c.type=c.type?c.type:"image",c.invalid_message=c.invalid_message?c.invalid_message:_coursepress.invalid_extension_message,c.description=c.description?c.description:"";var d=!1;"image"===c.type&&(d=_coursepress.allowed_image_extensions.join(", ")),"audio"===c.type&&(d=_coursepress.allowed_audio_extensions.join(", ")),"video"===c.type&&(d=_coursepress.allowed_video_extensions.join(", ")),!d&&_coursepress.allowed_extensions&&(d=_coursepress.allowed_extensions.join(", "));var e='<div class="'+c.container_class+'">';c.title&&(e+='<label for="'+b+'">'+c.title),c.description&&(e+='<p class="description">'+c.description+"</p>"),c.title&&(e+="</label>");var f=a?'id="'+a+'"':"";return e+='<input class="'+c.textbox_class+" "+c.type+'_url" type="text" name="'+b+'" '+f+' placeholder="'+c.placeholder+'" value="'+c.value+'"/><input class="button browse-media-field" type="button" name="'+b+'-button" value="'+c.button_text+'"/><div class="invalid_extension_message">'+c.invalid_message+" "+d+"</div></div>"},CoursePress.UI.link_popup=function(a,b,c){return void 0===b&&(b=a),void 0===c&&(c={}),c.content.length<=0?"":(c.content=c.content?c.content:"",c.link_text=c.link_text?c.link_text:"",c.class=c.class?c.class:"",'<div id="'+a+'" name="'+b+'" class="link-popup '+c.class+'"><a class="popup-link">'+c.link_text+'</a><div class="popup hidden"><div class="popup-before"></div><div class="popup-button">&times;</div><div class="popup-content">'+c.content+"</div></div></div>")},a.fn.extend({browse_media_field:function(){return this.each(function(){var b=a(this).attr("name").replace("-button",""),c=a(a(this).parents("div").find("#"+b));a(c).on("keyup",function(){CoursePress.utility.valid_media_extension(a(c).val(),c)?(a(c).removeClass("invalid_extension_field"),a(c).parent().find(".invalid_extension_message").hide()):(a(c).addClass("invalid_extension_field"),a(c).parent().find(".invalid_extension_message").show())});var d=!1;a(this).on("click",function(){var b=jQuery(this),e=c,f=wp.media.string.props,g=wp.media.editor.send.attachment;return d=!0,wp.media.string.props=function(c,g){if(!1===d)return f(c,g);a(e).val(c.url),CoursePress.utility.valid_media_extension(g.url,e)?(a(e).removeClass("invalid_extension_field"),a(e).parent().find(".invalid_extension_message").hide()):(a(e).addClass("invalid_extension_field"),a(e).parent().find(".invalid_extension_message").show()),b.trigger("change")},wp.media.editor.send.attachment=function(c,f){if(!1===d)return g(c,f);a(e).val(f.url),CoursePress.utility.valid_media_extension(f.url,e)?(a(e).removeClass("invalid_extension_field"),a(e).parent().find(".invalid_extension_message").hide()):(a(e).addClass("invalid_extension_field"),a(e).parent().find(".invalid_extension_message").show()),b.trigger("change")},wp.media.editor.open(e),!1}).on("change",function(){d=!1})})},coursepress_timer:function(b){b=b||{seconds:10,running:!1,action:"none"};var c=b.seconds,d=0,e=jQuery(this),f=0!==parseInt(c/60/60);switch(b.action){case"none":e.append('<div class="cp-counter-clock"> </div>');var g=parseInt(c/60/60),h=parseInt((c-60*g*60)/60),i=c-60*g*60-60*h,j="";f&&(j+=CoursePress.utility.pad(g,2)+":"),j+=CoursePress.utility.pad(h,2)+":",j+=CoursePress.utility.pad(i,2),a(e.find(".cp-counter-clock")[0]).replaceWith('<div class="cp-counter-clock">'+j+"</div>"),e.append('<input class="cp-counter-start" type="button" value="'+_coursepress.labels.module_start_quiz+'">'),e.find(".cp-counter-start").on("click",function(){b.action="start",e.coursepress_timer(b),a(e.find(".cp-counter-start")).detach(),a(b.toggle_element).show(),a(".focus-nav").addClass("not-active"),a(".coursepress-breadcrumbs a").addClass("not-active")});break;case"start":return this.each(function(){e.trigger("timer_started",c);var b=setInterval(function(){if(c>0){c-=1,d+=1;var g=parseInt(c/60/60),h=parseInt((c-60*g*60)/60),i=c-60*g*60-60*h,j="";f&&(j+=CoursePress.utility.pad(g,2)+":"),j+=CoursePress.utility.pad(h,2)+":",j+=CoursePress.utility.pad(i,2),a(e.find(".cp-counter-clock")[0]).replaceWith('<div class="cp-counter-clock">'+j+"</div>"),e.trigger("timer_updated",d,c)}else e.trigger("timer_ended"),a(".module-quiz-question input").attr("disabled","disabled"),clearInterval(b)},1e3)})}},coursepress_ui_toggle:function(){return this.each(function(){a(this).off("click"),a(this).on("click",function(){var b="";a(this).addClass("toggle-ui-widget"),a(this).hasClass("on")?(a(this).removeClass("on"),a(this).addClass("off"),b="off"):(a(this).removeClass("off"),a(this).addClass("on"),b="on"),a(this).trigger("change",b)})})},link_popup:function(b){var c=this;c.options=b,c.link={},this.each(function(b,d){var e=a(this).attr("id"),f=a(this).attr("name"),g=a(this).attr("class"),h=this.innerHTML,i={};i.content=h,i.link_text=c.options.link_text||"Link",i.class=g,i.offset_x=c.options.offset_x||35,h=CoursePress.UI.link_popup(e,f,i),a(d).empty(),a(d).append(h);var j=a(d).find(".popup-link");a(j).on("click",function(b){if(a(".link-popup .popup-link").removeClass("open"),a('.popup .popup-before[display!="none"], .popup .popup-button[display!="none"], .popup .popup-content[display!="none"]').parent().fadeOut(100),a(this).hasClass("open"))a(this).removeClass("open"),a(document).click();else{b.stopPropagation(),a(this).addClass("open");var c=a(this).siblings(".popup"),d=a(this).siblings(".popup").find(".popup-before");a(document).width()-(a(this).offset().left+i.offset_x)>c.width()?c.css("left",a(this).position().left+i.offset_x):(c.css("left",a(this).position().left-(c.width()+10)),d.css("transform","rotate(180deg)"),d.css("-ms-transform","rotate(180deg)"),d.css("-webkit-transform","rotate(180deg)"),d.css("left",c.width())),c.css("position","absolute"),c.css("top",a(this).position().top-7),c.fadeIn(300)}}),a(".popup").on("click",function(a){a.stopPropagation()})}),a(document).click(function(){a(".link-popup .popup-link").removeClass("open"),a('.popup .popup-before[display!="none"], .popup .popup-button[display!="none"], .popup .popup-content[display!="none"]').parent().fadeOut(100)}),a(".link-popup .popup-button ").on("click",function(){a(".link-popup .popup-link").removeClass("open"),a('.popup .popup-before[display!="none"], .popup .popup-button[display!="none"], .popup .popup-content[display!="none"]').parent().fadeOut(100)})}}),CoursePress.Models=CoursePress.Models||{},CoursePress.Models.utility=CoursePress.Models.utility||{},CoursePress.Models.utility.Attachment=Backbone.Model.extend({initialize:function(){this.on("sync",this.process,this)},get_attachment:function(a,b,c,d){this.attachment_url=a,this.target=b,this.field=d||"post_excerpt",this.fallback=c||"",this.url=_coursepress._ajax_url+"?action=attachment_model&task=get&url="+a,this.fetch()},process:function(){if(this.get(0)){var b=this.get(0)[this.field];b=b.length>0?b:this.fallback,a(a(this.target)[0]).html(b)}}}),CoursePress.current_user_can=function(a){return _coursepress.is_super_admin||_coursepress.user_caps[a]},function(a){function b(a,b){return jQuery(b).val(a),CoursePress.utility.valid_media_extension(a,b)?(jQuery(b).removeClass("invalid_extension_field"),jQuery(b).parent().find(".invalid_extension_message").hide(),!0):(jQuery(b).addClass("invalid_extension_field"),jQuery(b).parent().find(".invalid_extension_message").show(),!1)}function c(){var a=jQuery(this),c=a.prevAll(".certificate_background_url:first");return wp.media.string.props=function(a){b(a.url,c)},wp.media.editor.send.attachment=function(a,d){b(d.url,c)},wp.media.editor.open(this),!1}function d(){var a=jQuery(this),c=a.prevAll(".certificate_logo_url:first");return wp.media.string.props=function(a){b(a.url,c)},wp.media.editor.send.attachment=function(a,d){b(d.url,c)},wp.media.editor.open(this),!1}function e(){var a=jQuery(".certificate_enabled");form_enabled=jQuery(".certificate-details, .button-certificate, .use-cp-default"),check_default=jQuery(".certificate_default"),form_default=jQuery(".certificate-details"),a.is(":checked")?(form_enabled.show(),check_default.is(":checked")?form_default.hide():form_default.show()):form_enabled.hide()}function f(){a.fn.wpColorPicker&&a(".certificate-color-picker").wpColorPicker()}function g(){var b=a(this),c=b.closest("form");tinymce.triggerSave();var d=c.serialize(),e=[b.attr("href"),d];return window.open(e.join("&"),"_blank"),!1}a(document).ready(function(){e(),f()}).on("click",".certificate_enabled",e).on("click",".certificate_default",e).on("click",".certificate_background_button",c).on("click",".certificate_logo_button",d).on("click",".button.button-certificate",g)}(jQuery),function(){function b(a,b){for(var c=!0,d=0;d<b.length;d+=1)if(!jQuery(b[d]).is(":checked")){c=!1;break}c?jQuery(a).show():jQuery(a).hide()}function c(){b(".cp-content-box.course",[this,".coursepress_courses_cap input"]),b(".cp-content-box.course-category",[this,".coursepress_courses_cap input"]),b(".cp-content-box.course-unit",[this,".coursepress_courses_cap input"]),b(".cp-content-box.instructor",[this,".coursepress_instructors_cap input"]),b(".cp-content-box.student",[this,".coursepress_students_cap input"]),b(".cp-content-box.notification",[this,".coursepress_notifications_cap input"]),b(".cp-content-box.discussion",[this,".coursepress_discussions_cap input"]),b(".capability-list .coursepress_courses_cap",[this]),b(".capability-list .coursepress_instructors_cap",[this]),b(".capability-list .coursepress_students_cap",[this]),b(".capability-list .coursepress_assessment_cap",[this]),b(".capability-list .coursepress_reports_cap",[this]),b(".capability-list .coursepress_notifications_cap",[this]),b(".capability-list .coursepress_discussions_cap",[this]),b(".capability-list .coursepress_settings_cap",[this])}function d(){b(".cp-content-box.course",[this]),b(".cp-content-box.course-category",[this]),b(".cp-content-box.course-unit",[this])}function e(){b(".cp-content-box.instructor",[this])}function f(){b(".cp-content-box.student",[this])}function g(){b(".cp-content-box.notification",[this])}function h(){b(".cp-content-box.discussion",[this])}a(document).on("change",".capability-list .coursepress_dashboard_cap input",c).on("change",".capability-list .coursepress_courses_cap input",d).on("change",".capability-list .coursepress_instructors_cap input",e).on("change",".capability-list .coursepress_students_cap input",f).on("change",".capability-list .coursepress_notifications_cap input",g).on("change",".capability-list .coursepress_discussions_cap input",h)}()}(jQuery);